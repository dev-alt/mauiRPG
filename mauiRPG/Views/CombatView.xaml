<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
             xmlns:converters="clr-namespace:mauiRPG.Converters"
             x:Class="mauiRPG.Views.CombatView">
    <ContentView.Resources>
        <ResourceDictionary>
            <converters:BoolToColorConverter x:Key="BoolToColorConverter"/>
        </ResourceDictionary>
    </ContentView.Resources>
    <Grid>
        <!-- Enemy Info -->
        <Frame Grid.Row="0">
            <StackLayout>
                <Label Text="{Binding Enemy.Name}" />
                <ProgressBar Progress="{Binding Enemy.HealthPercentage}" />
                <Label Text="{Binding Enemy.CurrentHealth, StringFormat='HP: {0}'}" />
            </StackLayout>
        </Frame>
        <!-- Combat Log -->
        <ScrollView Grid.Row="1">
            <CollectionView ItemsSource="{Binding CombatLog}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Label Text="{Binding Message}"
                               TextColor="{Binding IsPlayerAction, Converter={StaticResource BoolToColorConverter}}"/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </ScrollView>
        <!-- Player Info and Actions -->
        <Grid Grid.Row="2">
            <Frame Grid.Column="0">
                <StackLayout>
                    <Label Text="{Binding Player.Name}" />
                    <ProgressBar Progress="{Binding Player.HealthPercentage}" />
                    <Label Text="{Binding Player.CurrentHealth, StringFormat='HP: {0}'}" />
                </StackLayout>
            </Frame>
            <StackLayout Grid.Column="1">
                <Button Text="Attack" Command="{Binding AttackCommand}" />
                <Button Text="Defend" Command="{Binding DefendCommand}" />
                <Button Text="Inventory" Command="{Binding OpenInventoryCommand}" />
                <Button Text="Run" Command="{Binding RunCommand}" />
            </StackLayout>
        </Grid>
    </Grid>
</ContentView>